<html>
	<body>
		<head>
			<title>Trips</title>
			<script type = "text/javascript" language = "javascript">
			// Sends a request for the API 
			var xmlhttp = new XMLHttpRequest();
			var url = "http://127.0.0.1:8000/trips/api/";
			
			xmlhttp.onreadystatechange = function() { 
			     if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
			         var myArr = JSON.parse(xmlhttp.responseText);
			         myFunction(myArr.sort(predicatBy("name")));
			     }
			 };
			 xmlhttp.open("GET", url, true);
			 xmlhttp.send();

             // Given an array, outputs it's contents into HTML form 
			 function myFunction(arr) {
			     var out = "";
			     var i;
			     for(i = 0; i < arr.length; i++) {
					 out += "<tr><td>" + arr[i].name + "</td><td>" + arr[i].start_date + "</td><td>" + arr[i].finish_date + "</td></tr>";
			     }
				 document.writeln("<table style=\"width:50%\" border=\"1\"><tr><th>Name</th><th>Start Date</th><th>End Date</th></tr>" + out + "</table>");
			 }
		 
             // Sorts array by the given predicate
			 function predicatBy(prop){
				 return function(a,b){
					 if( a[prop] > b[prop]){
						 return 1;
					 }else if( a[prop] < b[prop] ){
						 return -1;
					 }
					 return 0;
				 }
			 }
			 </script>
		</head>
	</body>
</html>